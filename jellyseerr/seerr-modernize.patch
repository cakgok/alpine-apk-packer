# seerr-modernize.patch
--- a/package.json
+++ b/package.json
@@ -173,13 +173,19 @@
     "typescript": "4.9.5"
   },
   "engines": {
-    "node": "^22.0.0",
-    "pnpm": "^9.0.0"
+    "node": "^24.0.0",
+    "pnpm": "^10.0.0"
   },
   "overrides": {
     "sqlite3/node-gyp": "8.4.1",
     "@types/express-session": "1.17.6"
   },
+  "pnpm": {
+    "onlyBuiltDependencies": [
+      "sqlite3",
+      "bcrypt"
+    ]
+  },
   "config": {
     "commitizen": {
       "path": "./node_modules/cz-conventional-changelog"
--- a/server/index.ts
+++ b/server/index.ts
@@ -162,7 +162,7 @@ app
       }
     });
     if (settings.network.csrfProtection) {
-      server.use(
+      server.use(() =>
         csurf({
           cookie: {
             httpOnly: true,